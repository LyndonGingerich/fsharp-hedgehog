<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Property
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Jacob Stanley;Nikos Baxevanis">

    <link rel="stylesheet" id="theme_link" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.3.1/materia/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script> -->

    <link type="text/css" rel="stylesheet" href="https://hedgehogqa.github.io/fsharp-hedgehog/content/navbar-fixed-right.css" />
    <link type="text/css" rel="stylesheet" href="https://hedgehogqa.github.io/fsharp-hedgehog/content/fsdocs-default.css" />
    <link type="text/css" rel="stylesheet" href="https://hedgehogqa.github.io/fsharp-hedgehog/content/fsdocs-custom.css" />
    <script type="text/javascript" src="https://hedgehogqa.github.io/fsharp-hedgehog/content/fsdocs-tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- BEGIN SEARCH BOX: this adds support for the search box -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
    <!-- END SEARCH BOX: this adds support for the search box -->
    
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-light bg-secondary fixed-right" id="fsdocs-menu">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <a href="https://hedgehog.qa"><img id="fsdocs-logo" src="https://raw.githubusercontent.com/hedgehogqa/fsharp-hedgehog/master/img/hedgehog-logo.png" /></a>
            <!-- BEGIN SEARCH BOX: this adds support for the search box -->
            <div id="header">
                <div class="searchbox" id="fsdocs-searchbox">
                    <label for="search-by">
                        <i class="fas fa-search"></i>
                    </label>
                    <input data-search-input="" id="search-by" type="search" placeholder="Search..." />
                    <span data-search-clear="">
                        <i class="fas fa-times"></i>
                    </span>
                </div>
            </div>

            <!-- END SEARCH BOX: this adds support for the search box -->
            <ul class="navbar-nav">
                <li class="nav-header">Links</li>
                <li class="nav-item" id="fsdocs-license-link"><a class="nav-link" href="https://github.com/hedgehogqa/fsharp-hedgehog/blob/master/LICENSE">License (Apache 2.0)</a></li>
                <li class="nav-item" id="fsdocs-release-notes-link"><a class="nav-link" href="https://github.com/hedgehogqa/fsharp-hedgehog/blob/master/CHANGELOG.md">Release Notes</a></li>
                <li class="nav-item" id="fsdocs-repository-link"><a class="nav-link" href="https://github.com/hedgehogqa/fsharp-hedgehog/">Source Repository</a></li>
                <li class="nav-header">
  Documentation
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://hedgehogqa.github.io/fsharp-hedgehog/property.html">
    Property

  </a>
</li>
                <li class="nav-header">
  API Reference
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://hedgehogqa.github.io/fsharp-hedgehog/reference/index.html">
    All Namespaces
  </a>
</li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <div class="masthead">
            <h3 class="muted"><a href="https://hedgehogqa.github.io/fsharp-hedgehog/">Hedgehog</a></h3>
        </div>
        <hr />
        <div class="container" id="fsdocs-content">
            <h1><a name="Property" class="anchor" href="#Property">Property</a></h1>
<p>Using Hedgehog, the programmer writes assertions about logical properties that a function should fulfill.</p>
<p>Take <a href="https://msdn.microsoft.com/visualfsharpdocs/conceptual/list.rev%5b%27t%5d-function-%5bfsharp%5d"><code>List.rev</code></a> as an example, which is a function that returns a new list with the elements in reverse order:</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip highlighted"><code lang="fs">List.rev [<span class="n">1</span>; <span class="n">2</span>; <span class="n">3</span>];;

<span class="k">val</span> it : int list = [<span class="n">3</span>; <span class="n">2</span>; <span class="n">1</span>]
</code></pre></td></tr></table>
<p>One logical property of <code>List.rev</code> is:</p>
<ul>
<li>Calling <code>List.rev</code> twice must return the elements in the original order.</li>
</ul>
<p>Here's an example assertion:</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip highlighted"><code lang="fs">List.rev (List.rev [<span class="n">1</span>; <span class="n">2</span>; <span class="n">3</span>]) = [<span class="n">1</span>; <span class="n">2</span>; <span class="n">3</span>];;

<span class="k">val</span> it : bool = <span class="k">true</span>
</code></pre></td></tr></table>
<h2><a name="A-generic-assertion" class="anchor" href="#A-generic-assertion">A generic assertion</a></h2>
<p>In the previous example <code>List.rev</code> was tested against an example value <code>[1; 2; 3]</code>. To make the assertion generic, the example value can be parameterized as <em>any list</em>:</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip highlighted"><code lang="fs"><span class="k">fun</span> xs <span class="o">-&gt;</span> List.rev (List.rev xs) = xs;;

<span class="k">val</span> it : xs:'a list <span class="o">-&gt;</span> bool <span class="k">when</span> 'a : equality = &lt;<span class="k">fun</span>:clo@<span class="n">33</span>&gt;
</code></pre></td></tr></table>
<p>Hedgehog will then attempt to generate a test case that <em>falsifies</em> the assertion. In order to do that, it needs to know which generator to use, to feed <code>xs</code> with random values.</p>
<h2><a name="A-generator-for-lists-of-integers" class="anchor" href="#A-generator-for-lists-of-integers">A generator for lists of integers</a></h2>
<p>Values for <code>xs</code> need to be generated by a generator, as shown in the <em>Generators</em> sections. The following one is for lists of type integer:</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip highlighted"><code lang="fs"><span class="k">let</span> g = Range.constant <span class="n">0</span> <span class="n">100</span> <span class="o">|</span>&gt; Gen.int<span class="n">32</span> <span class="o">|</span>&gt; Gen.list (Range.linear <span class="n">0</span> <span class="n">20</span>);;
<span class="k">val</span> g : Gen&lt;int list&gt;
</code></pre></td></tr></table>
<p>Every possible value generated by the <code>g</code> generator must now be supplied to the assertion, as shown below:</p>
<h2><a name="A-first-property" class="anchor" href="#A-first-property">A first property</a></h2>
<table class="pre"><tr><td class="snippet"><pre class="fssnip highlighted"><code lang="fs"><span class="k">fun</span> xs <span class="o">-&gt;</span>
    List.rev (List.rev xs) = xs
    <span class="o">|</span>&gt; Property.ofBool
<span class="o">|</span>&gt; Property.forAll g;;

<span class="k">val</span> it : Property&lt;unit&gt;
</code></pre></td></tr></table>
<blockquote>
<p>But what is <code>forAll</code>? This comes from <a href="https://en.wikipedia.org/wiki/Universal_quantification">predicate logic</a> and essentially means that the assertion holds <em>for all</em> possible values generated by <code>g</code>.</p>
</blockquote>
<h2><a name="Properties-can-also-be-created-using-the-expression" class="anchor" href="#Properties-can-also-be-created-using-the-expression">Properties can also be created using the <code>property</code> expression</a></h2>
<p>Here's how the previous property can be rewritten:</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip highlighted"><code lang="fs">property {
    <span class="k">let!</span> xs = g
    <span class="k">return</span> List.rev (List.rev xs) = xs
}
</code></pre></td></tr></table>
<h2><a name="Try-out-see-it-pass" class="anchor" href="#Try-out-see-it-pass">Try out (see it pass)</a></h2>
<table class="pre"><tr><td class="snippet"><pre class="fssnip highlighted"><code lang="fs"><span class="k">let</span> g = Gen.list (Range.linear <span class="n">0</span> <span class="n">100</span>) Gen.alpha
<span class="k">let</span> propConfig =
    PropertyConfig.defaultConfig
    <span class="o">|</span>&gt; PropertyConfig.withTests <span class="n">500</span>&lt;tests&gt;

property {
    <span class="k">let!</span> xs = g
    <span class="k">return</span> List.rev (List.rev xs) = xs
}
<span class="o">|</span>&gt; Property.renderWith propConfig
<span class="o">|</span>&gt; printfn <span class="s">"%s"</span>;;

&gt;
+++ OK, passed <span class="n">500</span> tests.

</code></pre></td></tr></table>
<p>The above property was exercised 500 times. The default is 100, which is what <code>Property.render</code> does:</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip highlighted"><code lang="fs"><span class="k">let</span> g = Gen.list (Range.linear <span class="n">0</span> <span class="n">100</span>) Gen.alpha

property {
    <span class="k">let!</span> xs = g
    <span class="k">return</span> List.rev (List.rev xs) = xs
}
<span class="o">|</span>&gt; Property.print

&gt;
+++ OK, passed <span class="n">100</span> tests.

</code></pre></td></tr></table>
<blockquote>
<p>Outside of F# Interactive, you might want to use <code>Property.check</code> or <code>Property.checkWith</code>, specially if you're using Unquote with xUnit, NUnit, MSTest, or similar.</p>
</blockquote>
<h2><a name="Try-out-see-it-fail" class="anchor" href="#Try-out-see-it-fail">Try out (see it fail)</a></h2>
<table class="pre"><tr><td class="snippet"><pre class="fssnip highlighted"><code lang="fs"><span class="k">let</span> tryAdd a b =
    <span class="k">if</span> a &gt; <span class="n">100</span> <span class="k">then</span> None <span class="c">// Nasty bug.</span>
    <span class="k">else</span> Some (a + b)

property { <span class="k">let!</span> a = Range.constantBounded () <span class="o">|</span>&gt; Gen.int<span class="n">32</span>
           <span class="k">let!</span> b = Range.constantBounded () <span class="o">|</span>&gt; Gen.int<span class="n">32</span>
           <span class="k">return</span> tryAdd a b = Some (a + b) }
<span class="o">|</span>&gt; Property.render
<span class="o">|</span>&gt; printfn <span class="s">"%s"</span>;;

&gt;
*** Failed! Falsifiable (after <span class="n">3</span> tests <span class="k">and</span> <span class="n">24</span> shrinks):
<span class="n">101</span>
<span class="n">0</span>

</code></pre></td></tr></table>
<p>The test now fails. — Notice how Hedgehog reports back the minimal counter-example. This process is called shrinking.</p>
<h2><a name="Reporting" class="anchor" href="#Reporting">Reporting</a></h2>
<p>Sometimes, it's useful to run a property and deal with the result programmatically. For example, if you wanted to
implement custom reports, or reports for another tool to consume (<code>JUnit</code> reports, or an HTML representation). This can
be done with the series of <code>Property.report*</code> functions. There are currently 8 variations of these functions:</p>
<ul>
<li><code>report</code> &mdash; Checks a <code>Property&lt;unit&gt;</code> and creates a report.</li>
<li><code>reportWith</code> &mdash; Checks a <code>Property&lt;unit&gt;</code> with a specific configuration and creates a report.</li>
<li><code>reportBool</code> &mdash; Checks a <code>Property&lt;bool&gt;</code> and creates a report.</li>
<li><code>reportBoolWith</code> &mdash; Checks a <code>Property&lt;bool&gt;</code> with a specific configuration and creates a report.</li>
<li><code>reportRecheck</code> &mdash; Rechecks a <code>Property&lt;unit&gt;</code> and creates a report.</li>
<li><code>reportRecheckWith</code> &mdash; Rechecks a <code>Property&lt;unit&gt;</code> with a specific configuration and creates a report.</li>
<li><code>reportRecheckBool</code> &mdash; Rechecks a <code>Property&lt;bool&gt;</code> and creates a report.</li>
<li><code>reportRecheckBoolWith</code> &mdash; Rechecks a <code>Property&lt;bool&gt;</code> with a specific configuration and creates a report.</li>
</ul>
<p>Internally, Hedgehog calls these functions from the <code>Property.check*</code> and <code>Property.recheck*</code> functions and pretty
prints the report to <code>stdout</code>.</p>
<p>The report itself can be inspected to find metrics about the run, including the number of tests, discards and the
overall result (<code>OK</code>, <code>GaveUp</code>, <code>Failed</code>). Upon a <code>Failed</code> status, more information can be retrieved about the nature
of the failure. This data includes the <code>Size</code>, and <code>Seed</code> of the shrinked counter example, as well as the number of
shrinks and a <code>Journal</code> containing log messages.</p>
<p>Here is an example of using <code>Property.report</code> to implement custom reports:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span class="id">integerGen</span> <span class="o">=</span> <span class="id">Gen</span><span class="pn">.</span><span class="id">int32</span> <span class="pn">(</span><span class="id">Range</span><span class="pn">.</span><span class="id">constantBounded</span> <span class="pn">(</span><span class="pn">)</span><span class="pn">)</span>
<span class="k">let</span> <span class="id">prop</span> <span class="o">=</span> <span class="id">property</span> <span class="pn">{</span>
    <span class="k">let!</span> <span class="id">x</span> <span class="o">=</span> <span class="id">integerGen</span>
    <span class="k">return</span> <span class="id">x</span> <span class="pn">&lt;</span> <span class="n">100</span>
<span class="pn">}</span>

<span class="k">let</span> <span class="id">report</span> <span class="o">=</span> <span class="id">Property</span><span class="pn">.</span><span class="id">report</span> <span class="id">prop</span>

<span class="k">match</span> <span class="id">report</span><span class="pn">.</span><span class="id">Status</span> <span class="k">with</span>
<span class="pn">|</span> <span class="id">OK</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">printfn</span> <span class="s">&quot;Test succeeded! %d tests, %d discards&quot;</span> <span class="id">report</span><span class="pn">.</span><span class="id">Tests</span> <span class="id">report</span><span class="pn">.</span><span class="id">Discards</span>
<span class="pn">|</span> <span class="id">_</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="id">eprintfn</span> <span class="s">&quot;Test failed.&quot;</span>
</code></pre>

            <div class="fsdocs-tip" id="fs1">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T</div>
<div class="fsdocs-tip" id="fs2">val eprintfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T</div>

        </div>

        <!-- BEGIN SEARCH BOX: this adds support for the search box -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
        <script type="text/javascript">var fsdocs_search_baseurl = 'https://hedgehogqa.github.io/fsharp-hedgehog/';</script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.8/lunr.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.min.js"></script>
        <script type="text/javascript" src="https://hedgehogqa.github.io/fsharp-hedgehog/content/fsdocs-search.js"></script>
        <!-- END SEARCH BOX: this adds support for the search box -->
    </div>
</body>

</html>

